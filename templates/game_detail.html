{% extends 'base.html' %}
{% load static %}
{% load game_filters %}

{% block title %}{{ game.title }} - Details{% endblock %}

{% block extra_css %}{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="game-detail-card mx-auto">
        <div class="row g-0">
            <div class="col-md-6">
                {% if game.image_url %}
                    <img src="{{ game.image_url }}" class="game-detail-img" alt="{{ game.title }}">
                {% else %}
                    <img src="{% static 'images/placeholder_game.png' %}" class="game-detail-img" alt="No image available for {{ game.title }}">
                {% endif %}
            </div>
            <div class="col-md-6 d-flex flex-column">
                <div class="card-body p-4 text-center">
                    <h1 class="game-detail-title mb-4">{{ game.title }}</h1>
                    <hr class="text-primary mx-auto w-75 mb-4">

                    <ul class="list-group list-group-flush game-info-list mb-4">
                        <li class="list-group-item text-start">
                            <i class="bi bi-controller"></i> <strong>Genre:</strong> {{ game.genre.name }}
                        </li>
                        <li class="list-group-item text-start">
                            <i class="bi bi-people-fill"></i> <strong>Players:</strong> {{ game|player_range }}
                        </li>
                        <li class="list-group-item text-start d-flex flex-column">
                            <div>
                                <i class="bi bi-star-fill"></i> <strong>Rating:</strong>
                                <span class="ms-2 d-inline-block" style="font-size: 1.2rem;">
                                    {% for i in "12345" %}
                                        {% if forloop.counter <= game.rating %}
                                            <i class="bi bi-star-fill text-warning"></i>
                                        {% else %}
                                            <i class="bi bi-star text-secondary"></i>
                                        {% endif %}
                                    {% endfor %}
                                ({{ game.rating|floatformat:1 }} / 5.0)
                                </span>
                            </div>
                        </li>
                        {% if game.release_date %}
                            <li class="list-group-item text-start">
                                <i class="bi bi-calendar-event"></i> <strong>Release Date:</strong> {{ game.release_date|date:"M d, Y" }}
                            </li>
                        {% endif %}
                    </ul>
                    
                    <h5 class="game-description-heading text-start">Description:</h5>
                    <p class="game-description-text text-start">
                        {{ game.description|default:"No description available for this game." }}
                    </p>
                    

                </div>
            </div>
        </div>
        <div class="mt-4 pt-3 p-4 border-top border-secondary">
            <div class="row row-cols-1 row-cols-md-4 g-3">
                <div class="col">
                    <a href="{% url 'games:games' %}" class="btn btn-action-secondary btn-action-uniform w-100">
                        <i class="bi bi-arrow-left me-2"></i> Back to Games
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'events:add_event' %}?game_id={{ game.pk }}" class="btn btn-primary btn-action-uniform w-100">
                        <i class="bi bi-calendar-plus me-2"></i> Create Event
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'games:edit_game' game.pk %}" class="btn btn-action-primary btn-action-uniform w-100">
                        <i class="bi bi-pencil me-2"></i> Edit Game
                    </a>
                </div>
                <div class="col">
                    <a href="{% url 'games:delete_game' game.pk %}" class="btn btn-danger btn-action-uniform w-100">
                        <i class="bi bi-trash me-2"></i> Delete
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}